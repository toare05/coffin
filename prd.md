




# 제품 요구사항 문서 (PRD): 개인 맞춤형 카페인 추적 앱

**문서 버전:** 1.0  
**작성일:** 2025년 3월 30일  
**기준 시간/위치:** 2025년 3월 30일 오전 12:26 (대한민국 광주)  

## 1. 개요 (Introduction/Overview)
- **제품명:** (가칭) 카페인 인사이트 (Caffeine Insight)
- **목적:** 사용자가 자신의 카페인 섭취량을 쉽게 기록하고, 개인별 생리적 요인을 반영하여 체내 카페인 농도 변화를 추정/예측함으로써, 사용자의 건강한 카페인 소비 습관 형성과 컨디션 관리를 돕는다.
- **핵심 가치:** 단순 기록을 넘어, 과학적 모델 기반의 개인 맞춤형 추정치를 제공하여 사용자의 이해도를 높인다.

## 2. 목표 (Goals)
### 사용자 목표:
- 자신의 일일/시간별 카페인 섭취량을 정확히 파악한다.
- 체내 카페인 농도 변화 추이를 시각적으로 이해한다.
- 카페인이 수면, 에너지 수준 등 컨디션에 미치는 영향을 추정하고 관리한다.
- 과도한 카페인 섭취를 예방하고 적정 섭취량을 유지한다.

### 제품 목표:
- 쉽고 빠른 카페인 섭취 기록 인터페이스를 제공한다.
- 개인별 요인을 반영한, 가능한 가장 현실적인 체내 카페인 농도 추정치를 제공한다.
- 데이터 시각화를 통해 사용자 경험을 향상시킨다.
- 사용자에게 앱의 추정치 한계(유전적 요인 등)를 명확히 인지시킨다.

## 3. 타겟 사용자 (Target Audience)
- 건강 및 웰빙에 관심이 많은 사용자
- 커피, 에너지 드링크, 차 등을 자주 마시는 사용자
- 운동 보충제(카페인 포함)를 섭취하는 운동 애호가
- 카페인 민감도가 높거나 수면 문제를 겪는 사용자
- 자신의 생체 리듬과 카페인 효과의 관계를 이해하고 싶은 사용자

## 4. 주요 기능 (Functional Requirements)
### 4.1. 사용자 프로필 및 개인화 설정:
- (선택사항) 로컬 또는 서버 기반 사용자 계정 생성 및 관리
- **개인화 요인 입력:**
  - 흡연 여부 (필수)
  - 임신 또는 수유 여부 (필수)
  - 경구 피임약 복용 여부 (필수)
  - 나이 (필수)
  - 성별 (참고용)
- 프로필 정보 수정 기능

### 4.2. 카페인 섭취 기록:
- **데이터베이스 기반 입력:**
  - 미리 정의된 카페인 음료/식품/보충제 데이터베이스 제공 (커피 종류/브랜드/사이즈, 차, 에너지 드링크, 부스터 등)
  - 검색 및 카테고리별 탐색 기능
  - 섭취량(사이즈/개수) 선택 기능
- **사용자 정의 입력:** 데이터베이스에 없는 항목 직접 입력 (제품명, 카페인 함량)
- 섭취 시간 기록: 현재 시간 기본 설정, 과거/미래 시간 수정 기능
- 기록된 섭취 내역 수정 및 삭제 기능

### 4.3. 체내 카페인 농도 추정 및 시각화:
- **현재 농도 표시:** 현재 시점의 예상 체내 카페인 총 잔여량(mg)을 메인 화면에 표시
- **계산 로직:** 아래 '5. 계산 모델 상세' 섹션에 정의된 모델 사용 (흡수 단계 반영, 개인 맞춤형 제거 속도, 누적 효과 계산)
- **그래프 시각화:** 시간에 따른 예상 체내 카페인 농도 변화 추이를 그래프로 표시 (예: 지난 12시간 및 향후 6시간 예측)

### 4.4. 섭취 기록 히스토리:
- 과거 카페인 섭취 기록을 시간 순서대로 목록 또는 캘린더 형태로 조회

### 4.5. 카페인 항목 데이터베이스 관리:
- 앱 내부에 일반적인 카페인 항목 및 함량 데이터베이스 유지/관리
- (추후) 데이터베이스 업데이트 기능 (관리자 또는 커뮤니티 기여)

## 5. 계산 모델 상세 (Calculation Model Details)
### 5.1. 기본 모델:
- 1차 흡수 및 1차 제거를 따르는 1-구획 약동학 모델 (One-compartment model with first-order absorption and elimination)

### 5.2. 모델 파라미터:
- **ka (흡수 속도 상수):** 고정된 평균값 사용. 카페인 최고 혈중 농도 도달 시간(Tmax)이 약 45분 ~ 60분 범위가 되도록 설정 (예: ka = 1.0 /h 근방).
- **kel (제거 속도 상수):** 개인 맞춤형으로 계산.
  - kel = ln(2) / T_half_adjusted
- **T_half_adjusted (조정된 반감기):**
  - 기본 반감기 (T_half_baseline, 예: 5시간) 설정
  - 사용자 프로필(흡연, 임신, OCP 복용 여부, 나이)에 따라 조정 계수 적용. (예: 흡연 시 x 0.6, 임신(후기) 시 x 2.5, OCP 복용 시 x 1.5, 나이에 따른 미미한 조정 등 - 정확한 계수는 연구 기반으로 결정)

### 5.3. 계산 방식:
- 현재 시간(t)의 총 잔여량(A_total(t)) = Σ [과거 각 섭취 i로부터 현재까지 남아있는 잔여량 A_i(t)]
- 각 A_i(t)는 ka, 개인화된 kel_adjusted, 섭취량(Dose_i), 섭취 후 경과 시간(t'_i)을 이용하여 계산됨.

### 5.4. 고려하지 않는 요소:
- 음료를 마시는 속도

## 6. 기술 구현 상세 (Technical Implementation Details)
### 6.1. 기술 스택:
- **프론트엔드:** Next.js 15
- **백엔드:** Supabase
- **앱 배포:** Capacitor (iOS/Android)
- **스타일링:** Tailwind CSS, ShadCN

### 6.2. 앱 래핑 전략:
- **Capacitor 기반 하이브리드 앱 구현:**
  - Next.js 웹 앱을 기본으로 개발
  - Capacitor를 통한 네이티브 기능 접근
  - 주요 네이티브 기능:
    - 푸시 알림 (카페인 섭취 기록 알림)
    - 로컬 알림 (수면 시간 예정 알림)
    - 오프라인 데이터 저장

### 6.3. 배포 전략:
- **웹:** Vercel을 통한 배포
- **iOS:** App Store 배포
- **Android:** Google Play Store 배포
- **PWA:** Progressive Web App 지원
